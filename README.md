# Laravel 12.x — Русская документация

Этот репозиторий содержит актуальный перевод официальной документации Laravel 12.x на русский язык. Текст синхронизирован с оригинальными материалами, опубликованными на [laravel/framework](https://github.com/laravel/framework) и [laravel/docs](https://github.com/laravel/docs).

## Структура

- Каталог [`12.x`](12.x/) — переведённые разделы официального руководства.

## Настройка удалённых репозиториев

Чтобы подготовить публикацию перевода на GitHub, добавьте удалённые репозитории для собственного форка и (опционально) основного источника:

```bash
./scripts/setup-remotes.sh git@github.com:<ваш-аккаунт>/laravel-docs-ru.git https://github.com/laravel/docs.git
```

После выполнения команды проверьте список удалённых репозиториев:

```bash
git remote -v
```

> **Важно.** Скрипт не может создать репозиторий или выдать токен доступа автоматически. Перед публикацией убедитесь, что у вас
> есть действующий GitHub-токен, deploy key или иной способ аутентификации, позволяющий записывать в выбранный удалённый
> репозиторий. Без этих данных `git push` завершится ошибкой даже при корректной настройке URL.

При необходимости сразу опубликовать текущую ветку используйте флаг `--push`:

```bash
./scripts/setup-remotes.sh --push git@github.com:<ваш-аккаунт>/laravel-docs-ru.git https://github.com/laravel/docs.git
```

По умолчанию скрипт определит имя активной ветки и выполнит `git push --set-upstream origin <ветка>`. Чтобы отправить код в другую ветку удалённого репозитория, задайте её как параметр флага: `--push=release`. В этом случае текущая локальная ветка будет опубликована в `origin/release`, а привязка `upstream` для неё обновится автоматически.

Если хотите полностью автоматизировать публикацию, можно использовать флаг `--github`, который берёт имя репозитория из `GITHUB_REPOSITORY` (или принимает его в виде `--github=owner/repo`) и формирует push-URL на основе токена `GITHUB_TOKEN`:

```bash
export GITHUB_TOKEN=<ваш-персональный-токен>
export GITHUB_REPOSITORY=<owner>/<repo>
./scripts/setup-remotes.sh --github --upstream=https://github.com/laravel/docs.git --push
```

В этом режиме fetch-URL останется без токена (`https://github.com/<owner>/<repo>.git`), а push-URL будет настроен с учётом токена. Скрипт не выводит токен в консоль, поэтому лог остаётся безопасным. Чтобы переопределить ветку назначения, укажите `--push=<branch>`.

Если не хочется хранить токен в push-URL, добавьте флаг `--github-askpass`. Скрипт создаст вспомогательный `askpass`-скрипт внутри `.git`, который подставит ваш логин и `GITHUB_TOKEN` при запросе учётных данных Git'ом. Такой подход особенно удобен для CI/CD, где вывод команд попадает в логи:

```bash
export GITHUB_TOKEN=<ваш-персональный-токен>
export GITHUB_REPOSITORY=<owner>/<repo>
./scripts/setup-remotes.sh --github --github-askpass --push
```

По умолчанию в качестве логина берётся `GITHUB_USERNAME` или владелец из `GITHUB_REPOSITORY`. Файл с токеном получает права `700`, чтобы закрыть доступ другим пользователям системы. При необходимости можно удалить вспомогательный скрипт и сбросить настройку командой `git config --unset core.askPass`.

Если после публикации вы не видите обновления на GitHub, убедитесь, что у вас есть права записи в указанный репозиторий и что используется корректный URL. Проверить последние коммиты на удалённом сервере можно командой `git ls-remote origin`, `git log origin/<ветка>` или через веб-интерфейс GitHub.

### Публикация через deploy key

Если для репозитория настроен deploy key (как на скриншоте выше), сохраните приватную часть ключа в файл с правами `600` и передайте путь к нему через флаг `--ssh-key`. Скрипт настроит `core.sshCommand`, поэтому Git автоматически будет использовать нужный ключ для всех операций по SSH:

```bash
chmod 600 ~/.ssh/rularavel_dk
./scripts/setup-remotes.sh --ssh-key ~/.ssh/rularavel_dk git@github.com:<ваш-аккаунт>/laravel-docs-ru.git
```

Команду можно комбинировать с `--push` или `--github`. При запуске скрипт проверит наличие и читаемость ключа, а затем сохранит абсолютный путь в конфигурации репозитория. Чтобы сбросить настройку, выполните `git config --unset core.sshCommand`.

Если deploy key передаётся в окружение (например, провайдер CI кладёт приватный ключ в переменную `DEPLOY_KEY`), используйте флаг `--ssh-key-env`. Он сохранит содержимое переменной в защищённый файл внутри `.git` и автоматически подключит его для Git:

```bash
export DEPLOY_KEY="$(cat ~/.ssh/rularavel_dk)"
./scripts/setup-remotes.sh --ssh-key-env --push git@github.com:<ваш-аккаунт>/laravel-docs-ru.git
```

Имя переменной можно переопределить (`--ssh-key-env=MY_PRIVATE_KEY`). Флаг несовместим с `--ssh-key`, чтобы избежать неоднозначности. После выполнения обязательно очистите переменные окружения с приватными данными.

## Обновление перевода

1. Скачайте свежую версию оригинальной документации из ветки `12.x` репозитория [laravel/docs](https://github.com/laravel/docs).
2. Внесите изменения в соответствующие файлы в каталоге `12.x`.
3. Проверьте текст на предмет терминологии и соответствия синтаксису Markdown.
4. Создайте коммит с описанием обновлений и отправьте pull request.

## Автоматизированный перевод

Для синхронизации с актуальной версией официальной документации предусмотрен скрипт `scripts/translate_docs.py`. Он загружает
оригинальные `.md` файлы и выполняет офлайн‑перевод на русский язык с помощью [Argos Translate](https://www.argosopentech.com/).
Перед первым запуском установите зависимости:

```bash
pip install argostranslate
python - <<'PY'
import argostranslate.package
packages = argostranslate.package.get_available_packages()
package_to_install = next(p for p in packages if p.from_code == 'en' and p.to_code == 'ru')
path = package_to_install.download()
argostranslate.package.install_from_path(path)
PY
```

Пример полной синхронизации каталога `12.x` с репозиторием `laravel/docs`:

```bash
git clone https://github.com/laravel/docs.git /tmp/laravel-docs
./scripts/translate_docs.py /tmp/laravel-docs 12.x
```

Если требуется обновить только отдельные файлы, перечислите их через аргумент `--files`:

```bash
./scripts/translate_docs.py /tmp/laravel-docs 12.x --files routing.md validation.md
```

> **Примечание.** Скрипт сохраняет структуру Markdown и не затрагивает содержимое внутри тройных бэктиков, поэтому примеры кода
> остаются без изменений. Тем не менее, результат автоматического перевода стоит вычитать вручную.

## Лицензия

Перевод основан на оригинальной документации Laravel, распространяемой по лицензии MIT. Тот же тип лицензии применяется и к этому репозиторию.
